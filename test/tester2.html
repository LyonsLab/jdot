<html>
<body>

<div>
    Number of points: <input id='num_points' size='15'>
    <button onclick='setPoints();'>Run</button><br>
    <!--Type: <button id='type' onclick='toggleType();'>Points</button> -->
</div>

<div id='mtulidotplot'></div>
<div id='dotplot'></div>

<script src="../src/dotplot2.js"></script>
<script>
var initData = init_array;
var fetchData = fetch_array;

var gu1 = 2*1000*1000;
var gu2 = 3*1000*1000;
var chromosomes1 = [ 
    { name: '1', length: 100000 },
    { name: '2', length: 200000 },
    { name: '3', length: 300000 },
    { name: '4', length: 1400000 }
];
var chromosomes2 = [ 
    { name: 'a', length: 200000 },
    { name: 'b', length: 250000 },
    { name: 'c', length: 350000 },
    { name: 'd', length: 2200000 }
];

var maxTiles = 100;
var tileColSize = Math.floor(gu1/maxTiles);
var tileRowSize = Math.floor(gu2/maxTiles);

var multidotplot = new MultiDotPlot('mtulidotplot', {
    size: { width: 1000, height: 800 },
    genomes: [
        {
        	name: 'test1',
            extent: gu1,
            chromosomes: [ chromosomes1, chromosomes2 ],
            fetchDataHandler: fetchData,
        },
        {
        	name: 'test2',
            extent: gu2,
            chromosomes: [ chromosomes1, chromosomes2 ],
            fetchDataHandler: fetchData,
        },
        {
        	name: 'test1',
            extent: gu1,
            chromosomes: [ chromosomes1, chromosomes2 ],
            fetchDataHandler: fetchData,
        },
        {
        	name: 'test2',
            extent: gu2,
            chromosomes: [ chromosomes1, chromosomes2 ],
            fetchDataHandler: fetchData,
        }
    ],
    style: {
        position: "relative"
    }
});

var data;
var tiles;
setPoints(10*1000);
	
//------------------------------------------------------------------------------

function init_array(n) {
    // Generate some random data points
    data = [];
    for (var i=0; i < n; i++) {
        var x1 = Math.floor( Math.random() * gu1 );
        var y1 = Math.floor( Math.random() * gu2 );
        var x2 = x1 + Math.floor( Math.random() * 1000 );
        var y2 = y1 + Math.floor( Math.random() * 1000 );
        data.push({ x1: x1, y1: y1, x2: x2, y2: y2 });
    }
}

function fetch_array(x, y, width, height) {
    return data;
}

function setPoints(n) {
	if (n) 
		document.getElementById('num_points').value = n;
	else
		n = document.getElementById('num_points').value;
	
	initData(n);
	multidotplot.redraw();
}
</script>

</body>
</html>


